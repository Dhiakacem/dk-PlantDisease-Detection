{% extends "base.html" %}

{% block content %}

<h2>Plant Disease Detection Agrotek</h2>

<div>
  <div class="containers">
    <div class="card p-3">
      <p>
   "lorem "
      </p>
    </div>
  </div>
  <form id="upload-file" method="post" enctype="multipart/form-data">
    <label for="imageUpload" class="upload-label mt-3"> Upload... </label>
    <input
      type="file"
      name="file"
      id="imageUpload"
      accept=".png, .jpg, .jpeg"
    />
  </form>

  <div class="image-section" style="display: none">
    <div class="img-preview">
      <div id="imagePreview"></div>
    </div>
    <div>
      <button type="button" class="btn btn-primary btn-lg mt-3" id="btn-predict">
        Detect
      </button>
    </div>
  </div>

  <div class="loader" style="display: none"></div>

  <h3 id="result">
    <span> </span>
  </h3>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    // Display selected image preview
    $("#imageUpload").change(function() {
      var input = this;
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
          $("#imagePreview").css(
            "background-image",
            "url(" + e.target.result + ")"
          );
        };
        reader.readAsDataURL(input.files[0]);
        $(".image-section").show();
      }
    });

    // Perform prediction on button click
    $("#btn-predict").click(function() {
      $(".loader").show();
      
      // Simulating the prediction result
      var result = "Tomato - Early_blight";

      // Display the result
      $("#result span").text("Result: " + result);
      
      $(".loader").hide();
    });
  });
</script>

{% endblock %}
